<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>GFW Ekuatorial Intro</title>
  <meta name="description" content="">

  <link href='http://fonts.googleapis.com/css?family=Francois+One|Alegreya+Sans+SC|Alegreya:400,400italic,700|Alegreya+Sans' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="styles/css/intro.css">
</head>
<body>
  <div class="intro-container">
    <video autoplay loop poster="videos/posters/intro-bg.jpg" class="intro-video">
      <source src="videos/intro.mp4" type="video/mp4">
    </video>

    <div class="intro-overlay">
      <div class="intro-branding">
        <div class="intro-branding__logo">Ekuatorial</div>
        <p class="intro-branding__text">Ekuatorial In-Depth Reports</p>
      </div>
      <div class="intro-heading">
        <h1>Laju Deforestasi di Indonesia</h1>
      </div>

      <div class="intro-maps">
        <img src="images/maps/indonesia.png" width="1202" height="484" usemap="#indonesia"
          class="map-indonesia js-map js-map-indonesia">
        <img src="images/maps/aceh.png" width="1202" height="484" usemap="#indonesia"
          class="map-aceh js-map js-map-aceh">
        <img src="images/maps/riau.png" width="1202" height="484" usemap="#indonesia"
          class="map-riau js-map js-map-riau">
        <img src="images/maps/kalteng.png" width="1202" height="484" usemap="#indonesia"
          class="map-kalteng js-map js-map-kalteng">
        <img src="images/maps/papua.png" width="1202" height="484" usemap="#indonesia"
          class="map-papua js-map js-map-papua">

        <div class="map-pin map-pin-aceh js-map-pin js-map-pin-aceh">
          <div class="pin-line js-pin-line"></div>
          <div class="pin-text js-pin-text"><a href="/story.html">Aceh</a></div>
        </div>
        <div class="map-pin map-pin-riau js-map-pin js-map-pin-riau">
          <div class="pin-line js-pin-line"></div>
          <div class="pin-text js-pin-text"><a href="/story.html">Rawa Tripa</a></div>
        </div>
        <div class="map-pin map-pin-kalteng js-map-pin js-map-pin-kalteng">
          <div class="pin-line js-pin-line"></div>
          <div class="pin-text js-pin-text"><a href="/story.html">KalTeng</a></div>
        </div>
        <div class="map-pin map-pin-papua js-map-pin js-map-pin-papua">
          <div class="pin-line js-pin-line"></div>
          <div class="pin-text js-pin-text"><a href="/story.html">Papua</a></div>
        </div>
      </div>

      <div class="intro-summary">
        <p class="summary-date">Tempo, 22 Juli 2012</p>
        <h2 class="summary-heading">Jejak Hitam Gubernur Hijau</h2>
        <p class="summary-text">
          <span class="js-summary-typed"></span>
        </p>
      </div>
    </div>

    <map name="indonesia">
      <area shape="poly" coords="0,37,33,46,63,47,78,75,78,129,10,62" class="js-area-aceh">
      <area shape="poly" coords="140,121,206,160,254,155,238,203,190,212,144,187,130,169,129,139" class="js-area-riau">
      <area shape="poly" coords="452,239,530,178,552,175,573,227,539,281,480,287,460,269" class="js-area-kalteng">
      <area shape="poly" coords="945,238,968,186,1060,208,1076,260,1076,295,1029,299,1004,268" class="js-area-papua">
    </map>
  </div>

  <script src="components/jquery/dist/jquery.min.js"></script>
  <script src="components/typed.js/dist/typed.min.js"></script>
  <script>
    (function($) {

      "use strict";

      /// Maps ///

      var $allMaps = $('.js-map:not(.js-map-indonesia)');
      var $allPins = $('.js-map-pin');
      var $allPinLines = $('.js-pin-line');
      var $allPinTexts = $('.js-pin-text');

      var locations = ['aceh', 'riau', 'kalteng', 'papua'];
      var $maps = {}, $area = {}, $pins = {};

      $allMaps.on('click', function() {
        $(this).add($allPins).fadeOut();
      });

      locations.forEach(function(location) {
        $maps[location] = $('.js-map-' + location);
        $area[location] = $('.js-area-' + location);
        $pins[location] = $('.js-map-pin-' + location);

        $area[location].on('mouseenter', function() {
          if ($maps[location].is(':visible')) return;

          $allMaps.fadeOut();
          $maps[location].fadeIn();
          showPin($pins[location]);
        });
      });

      function showPin($pin) {
        if ($pin.is(':visible')) return;

        $allPins.fadeOut();
        $allPinLines.hide();
        $allPinTexts.hide();
        $pin.fadeIn(200, function() {
          $(this)
            .find('.js-pin-line').slideDown(200)
            .end()
            .find('.js-pin-text').slideDown(200);
        });
      }

      /// Typed text ///

      $('.js-summary-typed').typed({
        strings: ['Hutan gambut Rawa Tripa, Aceh, salah satu "harta karun" provinsi itu, di ambang kehancuran. Penyidik gabungan dari Jakarta terus menelisik pelanggaran-pelanggaran yang berujung pada perusakan hutan itu'],
        typeSpeed: 0,
        cursorChar: "_"
      });

    })(jQuery);
  </script>

  <script src="http://localhost:35729/livereload.js"></script>
</body>
</html>